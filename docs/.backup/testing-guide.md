# 功能测试使用指南

## 📚 文档体系

本测试体系包含两类文档：

### 1. 测试清单模板（functional-test-checklist.md）

**用途**：可复用的测试检查点清单

**特点**：
- 📋 **TEMPLATE** 标记的内容是固定的，修改需团队同意
- 包含所有测试检查点和验证标准
- 提供示例命令和预期结果

**维护规则**：
- ✅ 允许：修正错误、优化描述、添加示例
- ⚠️ 需审批：添加/删除测试项、修改验证标准
- ❌ 禁止：随意删除测试项

### 2. 测试报告实例（functional-test-report-YYYY-MM-DD.md）

**用途**：记录每次具体的测试执行情况

**特点**：
- ✏️ **FILL** 填写本次测试的环境信息
- ✅ **RESULT** 记录实际测试结果
- ⚠️ **ISSUE** 记录发现的问题（解决后删除）

**命名规则**：`functional-test-report-YYYY-MM-DD.md`

---

## 🔄 测试流程

### 步骤1: 准备测试

```bash
# 1. 复制一份新的测试报告
cp docs/functional-test-report-template.md docs/functional-test-report-$(date +%Y-%m-%d).md

# 2. 准备测试环境
conda activate hive-backend  # 如使用 conda
cd backend && uvicorn app.main:app --host localhost --port 8000 &
cd frontend && npm run dev &
```

### 步骤2: 执行测试

1. **打开测试报告文档**
2. **参照测试清单**（functional-test-checklist.md）
3. **逐项执行测试**
4. **在报告中记录结果**

### 步骤3: 记录问题

发现问题时，在对应部分添加：

```markdown
**⚠️ ISSUE - 问题记录**：

- **问题**: 具体问题描述
- **详情**: 错误信息、复现步骤
- **解决方案**: 采取的解决措施
- **状态**: 🔄 待解决 / ✅ 已解决
```

### 步骤4: 解决问题

问题解决后：
1. 更新 ISSUE 状态为 ✅ 已解决
2. 如需要，在测试清单中添加注意事项
3. 继续后续测试

### 步骤5: 总结归档

测试完成后：
1. 填写测试进度总结
2. 统计通过率
3. 列出遗留问题
4. 提出改进建议
5. 归档测试报告

---

## 📝 内容分类详解

### 📋 TEMPLATE（模板内容）

**定义**：测试项、检查点、验证标准等固定内容

**示例**：
```markdown
## 📋 二、后端 API 基础验证（TEMPLATE）

- [ ] GET `/` 返回平台标识信息
- [ ] GET `/health` 返回 `status=healthy`
```

**修改规则**：
- 需要提交 PR 并经过团队审核
- 修改说明需记录在文档版本历史中

### ✏️ FILL（填写内容）

**定义**：每次测试时需要填写的环境信息

**示例**：
```markdown
**✏️ FILL - 本次测试环境信息**：

- 集群名称：`CDP-14`
- 集群地址：`192.168.0.105`
- 认证方式：`LDAP`
```

**使用规则**：
- 每次新测试开始前清空
- 填写本次测试的实际信息
- 保持简洁准确

### ✅ RESULT（结果记录）

**定义**：本次测试的实际执行结果

**示例**：
```markdown
**✅ RESULT - 测试结果**：

- [x] GET `/` ✓ 通过
  响应: {"message": "Hive Small File Management Platform API"}
- [x] GET `/health` ✓ 通过
  响应: {"status": "healthy", ...}
```

**使用规则**：
- 记录实际执行结果（通过/失败）
- 附上关键的响应数据或截图
- 失败项要详细说明原因

### ⚠️ ISSUE（问题记录）

**定义**：测试中发现的问题及解决过程

**示例**：
```markdown
**⚠️ ISSUE - 问题记录**：

- **问题**: Python 3.6 不支持 pydantic v2
- **解决**: 使用 conda 创建 Python 3.10 环境
- **状态**: ✅ 已解决
```

**使用规则**：
- 问题解决后标记状态为 ✅
- 严重问题即使解决也保留记录
- 轻微问题解决后可删除

---

## 💡 最佳实践

### 1. 测试前准备

- [ ] 检查测试清单是否为最新版本
- [ ] 准备好测试环境和数据
- [ ] 确保服务正常运行
- [ ] 准备好抓图工具（用于UI测试）

### 2. 测试执行

- [ ] 按顺序执行，不跳过
- [ ] 详细记录每一项的结果
- [ ] 失败项立即记录问题
- [ ] 定期保存测试报告

### 3. 问题处理

- [ ] 优先解决阻塞性问题
- [ ] 记录完整的问题信息
- [ ] 验证解决方案的有效性
- [ ] 更新相关文档

### 4. 报告归档

- [ ] 完整填写所有部分
- [ ] 检查格式正确性
- [ ] 提交到版本控制
- [ ] 通知相关人员

---

## 🔍 常见问题

### Q1: 测试清单可以修改吗？

**A**: 可以，但需要遵循以下规则：
- **错误修正**：可以直接修改（如修正命令、URL）
- **优化描述**：可以改进表述，使其更清晰
- **添加/删除测试项**：需要提交 PR 并团队审核
- **修改验证标准**：需要团队同意

### Q2: 测试报告要保存多久？

**A**: 建议保留最近 3-6 个月的测试报告，历史报告可归档到 `archive/test-reports/` 目录。

### Q3: 发现测试清单遗漏了某个功能怎么办？

**A**:
1. 在测试报告中记录这个发现
2. 提交 issue 或 PR 建议添加
3. 经团队审核后更新测试清单

### Q4: 同一天需要测试多次怎么办？

**A**: 使用时间戳区分：
```
functional-test-report-2025-10-21-01.md
functional-test-report-2025-10-21-02.md
```

### Q5: 可以部分执行测试吗？

**A**: 可以，但需要在报告中明确说明：
- 本次测试范围（第几部分到第几部分）
- 未测试部分的原因
- 计划何时完成剩余测试

---

## 📊 测试覆盖率追踪

建议定期统计：

```markdown
| 测试部分 | 总检查点 | 已测试 | 通过 | 失败 | 覆盖率 |
|---------|---------|-------|------|------|--------|
| 一、前置条件 | 10 | 10 | 10 | 0 | 100% |
| 二、API基础 | 3 | 3 | 3 | 0 | 100% |
| 三、集群管理 | 15 | 0 | 0 | 0 | 0% |
| ... | ... | ... | ... | ... | ... |
| **总计** | **XX** | **XX** | **XX** | **XX** | **XX%** |
```

---

## 🎯 快速开始示例

```bash
# 1. 进入项目目录
cd /opt/AI/hive-small-file-platform

# 2. 激活环境
conda activate hive-backend

# 3. 启动服务
cd backend && uvicorn app.main:app --reload &
cd frontend && npm run dev &

# 4. 创建测试报告
cp docs/functional-test-report-template.md \
   docs/functional-test-report-$(date +%Y-%m-%d).md

# 5. 开始测试
# 打开测试报告，参照测试清单逐项执行
```

---

**更新日期**: 2025-10-21
**适用版本**: functional-test-checklist.md v1.1+
